# システム変数

__対応__:

- Win
- Cli
- Let

## hspstat {#hspstat}

HSPランタイムの情報

__グループ__:

システム変数

__説明__:

HSPランタイムの情報が整数値で代入されます。以下の情報がすべて合計された値になります。

- デバッグモード = 1
- スクリーンセーバー起動時 = 2
- コンソールモード = 16
- Macintosh版HSP = $80
- HSP3Dish = $100
- Linux版HSP = $1000
- UTF8文字列ランタイム = $20000
- 64ビットランタイム = $40000

__参照__:

_debug


## hspver {#hspver}

HSPのバージョン番号

__グループ__:

システム変数

__説明__:

HSP のバージョン番号が整数値で代入されます。バージョンコード +  マイナーバージョンコードの値になります。(3.0 は $3??? になる)

__参照__:

__hspver__


## cnt {#cnt}

ループのカウンター

__グループ__:

システム変数

__説明__:

repeat〜loopループのカウンターが整数値で代入されます。

__参照__:

repeat
foreach
loop


## err {#err}

HSPのエラーコード

__グループ__:

システム変数

__説明__:

HSPのエラーコードです。エラーコードとメッセージの対応については、別途マニュアル(error.htm)を参照してください。

__参照__:

onerror



## stat {#stat}

色々な命令のステータス値

__グループ__:

システム変数

__説明__:

色々な命令を実行した結果(ステータス)が整数値で代入されます。

__参照__:

return
dialog
mref


## mousex {#mousex}

マウスカーソルのX座標

__グループ__:

システム変数

__説明__:

マウスカーソルのX座標が整数値で代入されます。

__例__:

```
; マウスポインタの動きに沿って線を描く
repeat
	line mousex, mousey
	wait 1
	loop
```

__参照__:

mouse
mousey
mousew
ginfo_mx


## mousey {#mousey}

マウスカーソルのY座標

__グループ__:

システム変数

__説明__:

マウスカーソルのY座標が整数値で代入されます。

__例__:

```
; マウスポインタの動きに沿って線を描く
repeat
	line mousex, mousey
	wait 1
	loop
```

__参照__:

mouse
mousex
mousew
ginfo_my


## mousew {#mousew}

マウスカーソルのホイール値

__グループ__:

システム変数

__説明__:

ホイール付きマウスの移動量が整数値で代入されます。

__参照__:

mousex
mousey

__非対応__:

- Let


## strsize {#strsize}

読み出しバイト数

__グループ__:

システム変数

__説明__:

getstr、exist、bload命令などで読み出したバイト数が代入されます。

__参照__:

bload
exist
getstr


## refstr {#refstr}

色々な命令のステータス文字列


__グループ__:

システム変数

__説明__:

色々な命令を実行した結果の文字列が代入されます。

__参照__:

return
dialog
mref


## looplev {#looplev}

repeatのネストレベル

__グループ__:

システム変数

__説明__:

repeat〜loopのネストレベルが代入されます。

__参照__:

repeat
foreach
loop


## sublev {#sublev}

サブルーチンのネストレベル

__グループ__:

システム変数

__説明__:

サブルーチン(またはユーザー定義命令、関数) のネストレベルが代入されます。

__参照__:

gosub
return


## iparam {#iparam}

割り込み要因を示す値

__グループ__:

システム変数

__説明__:

割り込み要因を示す値が代入されます。
oncmd命令による割り込み時は、割り込みメッセージのIDが代入されます。
onexit命令による終了割り込み時は、通常のウィンドウクローズによる終了であれば0が、シャットダウン等のシステム通知による終了であれば1が代入されます。


__参照__:

onkey
onclick
onexit
lparam
wparam
onerror
oncmd

__例__:

```
	onkey goto *lab
	stop
*lab
	mes "キーコード : "+wparam+", 文字コード : "+iparam
	stop
```

__非対応__:

- Let


## wparam {#wparam}

割り込み時のwParam

__グループ__:

システム変数

__説明__:

割り込み時に保存される Windows のシステム値 (wParam) が代入されます。

__参照__:

onkey
onclick
onerror
iparam
lparam
onerror
oncmd

__例__:

```
	onkey goto *lab
	stop
*lab
	a = lparam>>24&1
	mes "キーコード : "+wparam+", 拡張キーフラグ : "+a
	stop
```

__非対応__:

- Let


## lparam {#lparam}

割り込み時のlParam

__グループ__:

システム変数

__説明__:

割り込み時に保存される Windows のシステム値 (lParam) が代入されます。

__参照__:

onkey
onclick
onerror
iparam
wparam
onerror
oncmd

__例__:

```
	onkey goto *lab
	stop
*lab
	a = lparam>>24&1
	mes "キーコード : "+wparam+", 拡張キーフラグ : "+a
	stop
```

__非対応__:

- Let


## hwnd {#hwnd}

現在のウィンドウハンドル

__グループ__:

システム変数

__説明__:

現在選択されているウィンドウのハンドル(ポインタ)が代入されます。
主にDLL等の外部呼出しで必要な場合に参照されます。

__参照__:

mref


## hdc {#hdc}

現在のデバイスコンテキスト

__グループ__:

システム変数

__説明__:

現在選択されているウィンドウのデバイスコンテキスト(ポインタ)が代入されます。
主にDLL等の外部呼出しで必要な場合に参照されます。

__参照__:

mref


## hinstance {#hinstance}

現在のインスタンスハンドル

__グループ__:

システム変数

__説明__:

現在実行中アプリケーションのインスタンスハンドル(ポインタ)が代入されます。
主にDLL等の外部呼出しで必要な場合に参照されます。

__参照__:

mref
__非対応__:

- Let


## refdval {#refdval}

色々な命令のステータス実数値

__グループ__:

システム変数

__説明__:

色々な命令を実行した結果の実数値が代入されます。

__参照__:

return


## thismod {#thismod}

現在の有効なモジュール変数

__グループ__:

システム変数

__説明__:

モジュール変数処理のためのユーザー定義命令・関数内で、
渡されたモジュール変数自身を示す名称として使用することができます。
\#modfuncで定義されたルーチンから、別な命令・関数を呼び出す場合に使用することができます。

__参照__:

newmod
delmod

__非対応__:

- Let


## notemax {#notemax}

メモリノートパッドの行数

__グループ__:

システム変数

__説明__:

現在選択されているメモリノートパッド全体の行数を示すシステム変数として使用することができます。
noteinfo関数でも同様の情報を取得することが可能です。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

noteinfo


## notesize {#notesize}

メモリノートパッドの文字数

__グループ__:

システム変数

__説明__:

現在選択されているメモリノートパッド全体の文字数(byte数)を示す
システム変数として使用することができます。
noteinfo関数でも同様の情報を取得することが可能です。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

noteinfo


## ginfo_mx {#ginfo_mx}

スクリーン上のマウスカーソルX座標

__グループ__:

システム変数

__説明__:

スクリーン上のマウスカーソルX座標が代入されています。
スクリーン座標系は、 pos命令などで使用するウィンドウ内の座標ではなく、デスクトップ画面全体から見た座標になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo
ginfo_my


## ginfo_my {#ginfo_my}

スクリーン上のマウスカーソルY座標

__グループ__:

システム変数

__説明__:

スクリーン上のマウスカーソルY座標が代入されています。
スクリーン座標系は、 pos命令などで使用するウィンドウ内の座標ではなく、デスクトップ画面全体から見た座標になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo
ginfo_mx


## ginfo_act {#ginfo_act}

アクティブなウィンドウID

__グループ__:

システム変数

__説明__:

現在アクティブになっているウィンドウIDが代入されています。
もし、 アクティブになっているウィンドウがHSP以外の場合は-1になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo


## ginfo_sel {#ginfo_sel}

操作先ウィンドウID

__グループ__:

システム変数

__説明__:

gsel命令で指定した画面の操作先ウィンドウIDが代入されています。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

gsel
ginfo


## ginfo_wx1 {#ginfo_wx1}

ウィンドウの左上X座標

__グループ__:

システム変数

__説明__:

スクリーン座標系で現在のウィンドウの左上X座標が代入されています。
スクリーン座標系は、 pos命令などで使用するウィンドウ内の座標ではなく、デスクトップ画面全体から見た座標になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_wy1
ginfo_wx2
ginfo_wy2
ginfo


## ginfo_wy1 {#ginfo_wy1}

ウィンドウの左上Y座標

__グループ__:

システム変数

__説明__:

スクリーン座標系で現在のウィンドウの左上Y座標が代入されています。
スクリーン座標系は、 pos命令などで使用するウィンドウ内の座標ではなく、デスクトップ画面全体から見た座標になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_wx1
ginfo_wx2
ginfo_wy2
ginfo


## ginfo_wx2 {#ginfo_wx2}

ウィンドウの右下X座標

__グループ__:

システム変数

__説明__:

スクリーン座標系で現在のウィンドウの右下X座標が代入されています。
スクリーン座標系は、 pos命令などで使用するウィンドウ内の座標ではなく、デスクトップ画面全体から見た座標になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_wy2
ginfo_wx1
ginfo_wy1
ginfo


## ginfo_wy2 {#ginfo_wy2}

ウィンドウの右下Y座標

__グループ__:

システム変数

__説明__:

スクリーン座標系で現在のウィンドウの右下Y座標が代入されています。
スクリーン座標系は、 pos命令などで使用するウィンドウ内の座標ではなく、デスクトップ画面全体から見た座標になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_wx2
ginfo_wx1
ginfo_wy1
ginfo


## ginfo_vx {#ginfo_vx}

ウィンドウのスクロールX座標

__グループ__:

システム変数

__説明__:

現在の操作先ウィンドウのスクロールX座標が代入されています。
これは、初期化サイズよりもウィンドウサイズが小さくなっている場合に、左上に表示されている座標がどれだけスクロールされているかを示す値です。
スクロールさせていない通常の状態では、(0,0)になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_vy
ginfo


## ginfo_vy {#ginfo_vy}

ウィンドウのスクロールY座標

__グループ__:

システム変数

__説明__:

現在の操作先ウィンドウのスクロールY座標が代入されています。
これは、初期化サイズよりもウィンドウサイズが小さくなっている場合に、左上に表示されている座標がどれだけスクロールされているかを示す値です。
スクロールさせていない通常の状態では、(0,0)になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_vx
ginfo


## ginfo_sizex {#ginfo_sizex}

ウィンドウ全体のXサイズ

__グループ__:

システム変数

__説明__:

現在の操作先ウィンドウの横幅が代入されています。
これは、ウィンドウの枠やタイトルバーなども含めたサイズになります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_sizey
ginfo


## ginfo_sizey {#ginfo_sizey}

ウィンドウ全体のYサイズ

__グループ__:

システム変数

__説明__:

現在の操作先ウィンドウの縦幅が代入されています。
これは、ウィンドウの枠やタイトルバーなども含めたサイズになります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_sizex
ginfo


## ginfo_winx {#ginfo_winx}

画面の描画エリアXサイズ

__グループ__:

システム変数

__説明__:

現在のウィンドウ描画エリアの横幅サイズが代入されています。
(buffer命令で作成された画面の場合は、初期化された画面サイズになります。)

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_winy
ginfo


## ginfo_winy {#ginfo_winy}

画面の描画エリアYサイズ

__グループ__:

システム変数

__説明__:

現在のウィンドウ描画エリアの縦幅サイズが代入されています。
(buffer命令で作成された画面の場合は、初期化された画面サイズになります。)

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_winx
ginfo


## ginfo_sx {#ginfo_sx}

画面の初期化Xサイズ

__グループ__:

システム変数

__説明__:

現在の操作先ウィンドウの初期化Xサイズが代入されています。
(最初にscreen,bgscr,buffer命令で初期化された画面サイズになります。)

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_sy
ginfo


## ginfo_sy {#ginfo_sy}

画面の初期化Yサイズ

__グループ__:

システム変数

__説明__:

現在の操作先ウィンドウの初期化Yサイズが代入されています。
(最初にscreen,bgscr,buffer命令で初期化された画面サイズになります。)

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_sx
ginfo


## ginfo_mesx {#ginfo_mesx}

メッセージの出力Xサイズ

__グループ__:

システム変数

__説明__:

最後にmes, print命令により出力されたメッセージのXサイズが代入されています。
サイズは、 X座標にどれだけのドット数で描画されたかを示します。
画面上の絶対座標ではないので注意してください。
また、複数行ある文字列を出力した場合は、最後の行にあたるサイズが取得されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_mesy
ginfo


## ginfo_mesy {#ginfo_mesy}

メッセージの出力Yサイズ

__グループ__:

システム変数

__説明__:

最後にmes, print命令により出力されたメッセージのYサイズが代入されています。
サイズは、 Y座標にどれだけのドット数で描画されたかを示します。
画面上の絶対座標ではないので注意してください。
また、複数行ある文字列を出力した場合は、最後の行にあたるサイズが取得されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_mesx
ginfo


## ginfo_r {#ginfo_r}

現在設定されているカラーコードR

__グループ__:

システム変数

__説明__:

color命令などにより指定された赤の色コード(輝度)が代入されています。
色コードは、0〜255までの整数値になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_g
ginfo_b
ginfo


## ginfo_g {#ginfo_g}

現在設定されているカラーコードG

__グループ__:

システム変数

__説明__:

color命令などにより指定された緑の色コード(輝度)が代入されています。
色コードは、0〜255までの整数値になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_r
ginfo_b
ginfo


## ginfo_b {#ginfo_b}

現在設定されているカラーコードB

__グループ__:

システム変数

__説明__:

color命令などにより指定された青の色コード(輝度)が代入されています。
色コードは、0〜255までの整数値になります。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_r
ginfo_g
ginfo


## ginfo_paluse {#ginfo_paluse}

デスクトップのカラーモード

__グループ__:

システム変数

__説明__:

現在のデスクトップカラーモード(色モード)が代入されています。
フルカラーモードの場合は0が、パレットモードの場合は1が返されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo


## ginfo_dispx {#ginfo_dispx}

デスクトップ全体のXサイズ

__グループ__:

システム変数

__説明__:

デスクトップ全体のサイズ(画面解像度)が代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_dispy
ginfo


## ginfo_dispy {#ginfo_dispy}

デスクトップ全体のYサイズ

__グループ__:

システム変数

__説明__:

デスクトップ全体のサイズ(画面解像度)が代入されています。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_dispx
ginfo


## ginfo_cx {#ginfo_cx}

カレントポジションのX座標

__グループ__:

システム変数

__説明__:

pos命令により設定されたカレントポジションのX座標が代入されています。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_cy
ginfo


## ginfo_cy {#ginfo_cy}

カレントポジションのY座標

__グループ__:

システム変数

__説明__:

pos命令により設定されたカレントポジションのY座標が代入されています。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo_cx
ginfo


## ginfo_intid {#ginfo_intid}

メッセージ割り込み時のウィンドウID

__グループ__:

システム変数

__説明__:

oncmd命令により設定されたメッセージ割り込み時のウィンドウIDが代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

oncmd
ginfo


## ginfo_newid {#ginfo_newid}

未使用ウィンドウID

__グループ__:

システム変数

__説明__:

screen命令やbuffer命令などで初期化されていない未使用のウィンドウIDが返されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo


## ginfo_accx {#ginfo_accx}

加速度センサー値(X)

__グループ__:

システム変数

__説明__:

加速度センサーが使用可能な環境で、センサーの値を取得します。
X軸に対する加速度を-1.0〜+1.0の範囲で取得したものになります。
加速度センサーが使用できない環境では、0.0が取得されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo
ginfo_accy
ginfo_accz


## ginfo_accy {#ginfo_accy}

加速度センサー値(Y)

__グループ__:

システム変数

__説明__:

加速度センサーが使用可能な環境で、センサーの値を取得します。
Y軸に対する加速度を-1.0〜+1.0の範囲で取得したものになります。
加速度センサーが使用できない環境では、0.0が取得されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo
ginfo_accx
ginfo_accz


## ginfo_accz {#ginfo_accz}

加速度センサー値(Z)

__グループ__:

システム変数

__説明__:

加速度センサーが使用可能な環境で、センサーの値を取得します。
Z軸に対する加速度を-1.0〜+1.0の範囲で取得したものになります。
加速度センサーが使用できない環境では、0.0が取得されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

ginfo
ginfo_accy
ginfo_accx


## dir_cur {#dir_cur}

カレントディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

現在のカレントディレクトリ(フォルダ)のパスが文字列で代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_exe {#dir_exe}

実行ファイルがあるディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

ランタイム実行ファイルがあるディレクトリ(フォルダ)のパスが文字列で代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_win {#dir_win}

Windowsディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

Windowsがインストールされているディレクトリ(フォルダ)のパスが文字列で代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_sys {#dir_sys}

Windowsシステムディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

Windowsのシステムディレクトリ(フォルダ)のパスが文字列で代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_cmdline {#dir_cmdline}

コマンドライン文字列

__グループ__:

システム変数

__説明__:

実行時に渡されたコマンドライン文字列が代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_desktop {#dir_desktop}

デスクトップディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

デスクトップディレクトリ(フォルダ)のパスが文字列で代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_mydoc {#dir_mydoc}

マイドキュメントディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

マイドキュメントディレクトリ(フォルダ)のパスが文字列で代入されます。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo


## dir_tv {#dir_tv}

HSPTVディレクトリ(フォルダ)

__グループ__:

システム変数

__説明__:

HSPTVディレクトリ(フォルダ)のパスが文字列で代入されます。
HSPTVディレクトリに標準で用意されたリソースを参照する場合に使用することができます。
dir_tvは、デバッグ実行時にのみ取得され、実行(.exe)ファイルとして動作している場合は、空の文字列("")を返します。HSPTVディレクトリ内のファイルを使用するソフトの実行ファイル作成時は、#pack命令により必要なファイルを指定する必要があるので注意してください。

※このシステム変数は、マクロとしてhspdef.as内で定義されています。

__参照__:

dirinfo