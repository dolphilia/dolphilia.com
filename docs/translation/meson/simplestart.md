# 全くの初心者のためのMesonのインストールと使用に関するガイド

このページは、Meson を使うのが初めての人、あるいは C や C++ のコードを一般にコンパイルするのが初めての人のために用意されています。このページには、ビルド環境を立ち上げて実行するための簡単な方法の1つが含まれていることを意図しています。もしあなたが経験豊富で、開発ソフトウェアをインストールし使用するための独自の方法をお持ちでしたら、ご自由にそれを代わりに使用してください。このガイドでは、Linux、Windows、macOSのプラットフォームのみを扱います。もしあなたがBSDのような他のプラットフォームを使っているなら、あなたはすでにそのプラットフォームへの開発ツールのインストール方法を知っているでしょう(おそらく、私たちよりも上手に)。

開発環境を稼働させるには、3つのフェーズがあります。

1. コンパイラツールチェーンのインストール
2. Mesonのインストール
3. プロジェクトの作成とビルド

## コンパイラツールチェーンのインストール

### Linux

すべてのLinuxディストリビューションは、開発ツールに簡単にアクセスできるようになっています。通常、ターミナルを開いて1つのコマンドを実行する必要がありますが、これはお使いのディストリビューションに依存します。

- Debian、Ubuntu、およびその派生版：`sudo apt install build-essential`
- Fedora, Centos, RHEL およびその派生版: `sudo dnf install gcc-c++`
- Arch: `sudo pacman -S gcc`

### Windows

Windowsで最も一般的な開発ツールチェーンはVisual Studioで、Visual Studioのウェブサイトからダウンロードすることができます。ライセンスを購入されていない場合は、Community版を選択してください。

Visual Studioのダウンロードページ

インストーラーをダウンロードし、実行します。インストールするもののリストが表示されるので、「Desktop development with C++」を選択します。これで、CコンパイラとC++コンパイラの両方がインストールされます。

Visual Studioのコンパイラをインストールする

インストーラーが終了すると、コンパイラツールチェーンが使用できるようになります。

### macOS

macOSの場合、開発ツールチェーンはMac app store経由でインストールする必要があります。XCodeというアプリを検索してインストールしてください。

XCodeのApp Storeページ

注意：XCodeをインストールしただけでは十分ではありません。また、XCodeのGUIアプリケーションを一度起動する必要があります。これにより、XCodeはコンパイルに必要な多くのファイルをダウンロードし、インストールします。

## Mesonのインストール

### Linux

Mesonのインストールは、コンパイラツールチェーンのインストールと同じように簡単です。

- Debian、Ubuntu およびその派生版：`sudo apt install meson ninja-build`
- Fedora, Centos, RHEL およびその派生版: `sudo dnf install meson ninja-build`
- Arch: `sudo pacman -S meson`

### Windows

Meson は Windows 標準の `.msi` インストーラを提供しており、[リリースページ](https://github.com/mesonbuild/meson/releases) からダウンロードすることができます。

Meson インストール済みダウンロード

ダウンロードして実行すると、必要なビットがすべてインストールされます。スタートメニューにある Visual Studio developer tools のコマンドプロンプトを実行することで、インストールがうまくいっていることを確認することができます。

デブツールプロンプト

mesonとninjaの両方を実行し、それらのバージョンを問い合わせることができるはずです。

動作するWindowsのインストール

### macOS

Homebrewで：

```
brew install meson ninja
```

Homebrewを使わない：

まずは、[リリースページ](https://github.com/mesonbuild/meson/releases)からインストールパッケージをダウンロードすることから始めてください。

macOSインストーラーのダウンロード

ダウンロードしたインストーラーをダブルクリックすると起動します。新しいバージョンのmacOSをお使いの場合、以下のようなエラーメッセージが出て、アプリケーションの実行を拒否することがあります。

macOS 署名の警告

これは、システム環境設定を起動し、「セキュリティとプライバシー」の項目を選択することで修正できます。一番下にブロックされているアプリが表示されますので、「とにかく開く」ボタンをクリックすることで有効にすることができます。

セキュリティ設定

これでインストーラが起動するはずです。起動しない場合は、ダウンロードしたインストーラーファイルを再度ダブルクリックしてください。

インストーラーの実行

インストールが終了したら、ターミナルアプリで動作確認ができます。

インストールが成功した場合

## Mesonを実行する

ターミナルアプリケーションを起動します。Windowsの場合、コンパイラはそのターミナルでしか利用できないため、前述のVisual Studio Developer Toolsのコマンドプロンプトを使用する必要があります。また、ホームディレクトリに変更する必要があります（LinuxとmacOSのターミナルは、デフォルトでホームディレクトリで起動します）。

```
cd \users\username
```

プロジェクトを格納するための新しいディレクトリを作成します。

```
mkdir testproject
cd testproject
```

Mesonを使用して、新しいサンプルプロジェクトを作成し、ビルドします。

```
meson init --name testproject --build
```

これはあなたのためにプロジェクトのスケルトンを作成し、それをコンパイルします。結果はbuildサブディレクトリに置かれ、そこから直接実行することができます。

```
build/testproject
```

すべて完成し、準備完了

これでプロジェクトは開発準備完了です。コードは任意のエディタで編集でき、ビルドサブディレクトリに移動して meson compile コマンドを実行することで再構築されます。Mesonのバージョンが古すぎる場合は、代わりにninjaコマンドを実行してプロジェクトをコンパイルすることができます。

