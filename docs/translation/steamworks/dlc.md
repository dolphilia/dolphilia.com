ダウンロードコンテンツ (DLC)
Steamworks ドキュメント > ストアプレゼンス > アプリケーション > ダウンロードコンテンツ (DLC)
概要
Steamは、CDキーでの登録またはSteamストアからの入手が可能な無料または有料のダウンロードコンテンツ (DLC) をサポートしています。 Steamクライアントでは、DLCのあるゲームは、ユーザーのライブラリ内では単一のアプリケーションとして表示され、DLCはゲームのプロパティダイアログを通して表示されます。

DLCは、アカウントに追加された時点でゲームの一部として統合されます。 パッチがリリースされると Steamは自動的にコンテンツを更新し、ユーザーがゲームをインストールすると、コンテンツも自動でインストールされます。

DLCとして配信可能な追加コンテンツの例として、次のようなゲーム内コンテンツが含まれます：
拡張
新マップ、新レベル
追加キャラクター
DLCはゲーム内では表示されない補助的コンテンツの提供にも使用できます。
アートブックや壁紙
Steam上のゲームサウンドトラックは、DLCとは異なる特別なタイプのAppIDとして扱われます。 装飾アイテム、消費アイテムやゲーム内通貨等の他のタイプのゲーム内コンテンツは microtransactionsとして設定することがより適しています。
ベストプラクティス
DLCは、製品にもっと投資をしたいと考える顧客に向けて価値を提供する優れた方法ですが、判断の難しい非金銭的負担が顧客にかかる場合があります。 ゲームリリースの初日にDLCをリリースすると、追加でお金を取るために完全版から一部を切り取ってリリースしたと思われる可能性もありますので、良い考えとは言えません。
ビデオチュートリアル
こちらのSteamworksチュートリアルでは、Steam製品のDLC作成および設定方法を説明しています。

YouTube™ の動画: Steamworks Tutorial #5 - Adding Downloadable Content for Your Application 
再生数： 32,124
A tutorial to show you how to add new downloadable content for your application on Steam. http://partner.steamgames.com Outline: - Creating a DLC AppID + Adding Content (00:00) - Editing Your DLC...
設定
Steamでは、各DLCは特有のappIDで識別されます。 ベースゲームとは異なり、DLCはappIDをdepotIDとして使用します。

DLCのappIDを新規に作成するには、ベースゲームの「関連する全てのパッケージ、DLC、体験版、ツール」を表示し、「新しいDLCを追加」ボタンをクリックします。

ダウンロードが完了すると、SteamクライアントはすべてのDLCをゲームのSteamディレクトリに保存します。 ゲームコンテンツの配信方法は2つあります：
コンテンツをゲームファイルに含み、ゲーム所有者全員に配布する方法。 この場合ゲームは ISteamApps::BIsDlcInstalled を使用して、ユーザーによるコンテンツの所有を判断できます。 この方法は、すべてのプレイヤーがコンテンツを閲覧できるという点で有効です。プレイヤーが使用するにはコンテンツを所有する必要があります（RTSユニット、マルチプレイヤースキンなど）。
新しいデポに含め、コンテンツを所有するユーザーだけがダウンロードできる方法。

詳細はデポを参照してください。
ゲーム内購入
Steamworksゲームは、プレイヤーがゲームから退出することなくゲーム内でDLCを閲覧、購入、ダウンロードできるようサポートしています。 Steamはすべての利用可能なコンテンツをユーザーに表示可能で、ユーザーはゲーム内で開いたSteamオーバーレイ上のWebブラウザセッションですべての購入プロセスを完了できます。 ユーザーがDLCを購入すると、Steamクライアントは自動でコンテンツをダウンロードします。ダウンロードが完了するとゲーム内のSteam通知経由でユーザーに通知し、ゲームに対してはダウンロードの完了と新規コンテンツの所有を通知します。

Steamworksゲームは、ISteamFriends::ActivateGameOverlayToStoreを使用して、SteamオーバレイにDLCを表示できます。 ISteamFriends::ActivateGameOverlayToStoreでは(ゲームのappID経由で)ゲームのすべてのDLCを表示したり 、特定のDLCに関する情報を (DLCのapp ID経由で)表示したりできます。 ユーザーをストアに送る前に、SteamworksゲームはISteamUtils::IsOverlayEnabledを呼び出し、そのユーザーがSteamクライアント設定を通してSteamオーバーレイを無効化したかを判断します。

注：実行中のゲームのバージョンとDLCの非互換性を避けるため、Steamはユーザーが最新バージョンのゲームを実行している時のみ新しいコンテンツをダウンロードします。
追加DLCデポの設定
デポドキュメントに従うと、ベースアプリに1つのDLCデポが追加されるはずです。別の言語やOS、アーキテクチャをサポートするためのDLCデポを追加する必要がある場合、次のステップを実行してください：
ベースアプリのSteamworks アプリ管理を開きます (すべてのデポはDLCではなくベースアプリで管理されています)。
Steamworks設定を編集 > SteamPipeタブ > デポを選択します。
[新しいデポを追加] ボタンをクリックし、名前をつけ、OKをクリックします。 既存のDLCデポに似た、識別しやすい名前をつけてください。
言語、OS、アーキテクチャを設定します。
ドロップダウンボックスからこのデポに関連付ける正しいDLCを選択します。
[変更を保存] をクリックします。 変更を公開するまでSteamクライアントは新しいデポを認識しません。
デポを含む必要のあるすべてのパッケージ(開発者コンプパッケージなど)にデポを追加します。
ビルドマシン上で、新しいDLCデポ用の新しいデポビルドスクリプトを追加します。
ベースゲームアプリのビルドスクリプトに、新しいデポのビルドスクリプト追加します。
ビルドをライブに設定するなど、新しいデポファイルをアップロードするための残りのタスクを完了します。

注：すべてのDLCデポは、ベースアプリのデポリスト内に存在します。 DLCアプリディレクトリ内に直接デポを存在させることはできません。
プログラムによるDLCのダウンロードとインストール
DLCは通常、Steamユーザーが購入するとすぐにダウンロードおよびインストールされます。 しかし、DLCを自動でダウンロードさせずに、ゲームがDLCをダウンロードするタイミングを制御するように設定することも可能です。 これは、ストリーミングインストールやゲームロジックに基づいたダウンロードをサポートするのに役立ちます。

オンデマンドでDLCをダウンロードおよびインストールさせる設定は、次の手順に従ってください。
最大10個のDLCをダウンロード可能なチャンクとして作成できます。
DLCの追加には、アプリケーションのランディングページを開き、「すべて関連パッケージ、DLC、体験版、およびツール」をクリックし、「新しいDLCを追加」ボタンを使います。
Steamクライアントが自動でダウンロードしないように各DLCを設定します。
それぞれのDLCでSteamworks 設定 > 一般タブを開きます。
[SteamがこのDLCを自動でダウンロードしないようにする] というボックスにチェックが入っていることを確認します。

適切なパッケージ (Steamストア、リテール、ベータテスト、Developer Comp等)に DLCを追加し、ベースアプリが購入された時にアクセスできるようにします。
アプリのランディングページを開き、「関連する全てのパッケージ、DLC、体験版、ツール」をクリックします。
DLCを追加したいパッケージをクリックします。
[+アプリケーションを追加] をクリックし、関連DLCを見つけ、チェックマークがついていることを確認後、[続行] をクリックして、保存します。
Steampipeビルドプロセスの一環として、各DLC用の適切なファイルを、関連する DLCデポに追加します。
詳細は デポを参照してください。
コード内の適切な場所に次のAPIを実装して、DLCをダウンロード・インストールするようにします。
ISteamApps::BIsDlcInstalledは各DLCがインストール済みかを判断します
ISteamApps::InstallDLCがダウンロードをトリガーし、コールバックISteamApps::DlcInstalled_tを処理します。
この方法でトリガーされたダウンロードは、ダウンロードキューの先頭に配置され、直ちに開始されます。
ISteamApps::GetDlcDownloadProgressはオプションでインストールされたDLCの進行状況の追跡に使用されます。

補足：
「SteamによるこのDLCの自動的なダウンロードを無効化する」ボックスにチェックを付けた場合、ゲームがISteamApps:InstallDLC APIを使っていなくても、このDLCを所有するプレイヤーは、ライブラリからDLCのインストールを手動で選択できるようになります。
SteamクライアントUIの[プロパティ] > [DLC]タブから、ユーザー自身がDLCのダウンロードを開始することもできます。
必要に応じてISteamApps::UninstallDLCを使用して、DLCコンテンツを削除できます。
テストの実施
DLCのテストを開始する前に、Steamクライアントのゲームリストからゲームを選択し、「プロパティ」から「DLC」タブを選択し、DLCを所有していることを確認してください。 そこに表示されないDLCは所有していません。

DLCの所有プロセスはSteamクライアントを通してシミュレーションできます。 新コンテンツがSteamに追加されると、パブリッシャーグループを通してコンテンツへのアクセスを付与するパッケージが与えられます。 通常、このパッケージの名前には「Developer Comp」が含まれています。

一時的に「Developer Comp」パッケージの所有を無効化して、DLCの購入をシミュレーションすることができます。 それには、以下のステップに従ってください：
steam.exeを次のコマンドと共に実行します -console (または steam://nav/consoleを実行)
クライアント内のコンソールタブを開きます
コマンドを入力します：licenses_for_app <appID>。 これによって、どのPackageIDを通してDLC appIDを所有しているかがわかります。
上記のpackageIDを使って、コマンドを入力します disable_license <packageID>。

この時点で、あなたのアカウントは自動でDLCを所有していない状態となります。 ゲームを実行し、DLCの所有権APIの応答をテストできます。 Steamコンソールに戻ってenable_license <packageID>を使うと、DLCの所有を再度有効化できます。 または、Steamを再起動すると自動で所有状態が元に戻ります。
不正行為・詐欺に備える
何らかの購入可能な価値を提供する際には、必ず詐欺のリスクが伴います。

DLC詐欺では、ユーザーが盗んだ支払方法（クレジットカードなど）で価値の高いDLCを購入します。 詐欺師の目的は、DLC内の利用可能なすべてのコンテンツを、本人が所有する別のアカウントや、システム外の支払方法での購入を希望するプレイヤーのアカウントに移行することです。 他にも、詐欺師はシステム外で支払いを受け取る形で、アカウント自体を販売しようとします。 

このため、トレード可能なアイテムやゲーム内通貨をDLCに含むことは推奨されません。 アイテムやゲーム内通貨の販売については、マイクロトランザクションおよびドキュメント内のアドバイスを参考にしてください。

Steamは最初の購入から48時間以内にほとんどの不正取引を見つけます。 起動時または48時間後に実行されるDLCの所有権チェックでは、更新されたステータスに基づいて、取引に対する変更が照合されます。